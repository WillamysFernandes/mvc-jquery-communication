@model LanchesMac.ViewModels.EditViewModel;
<div class="input-group mb-3">
	<input id="txt_id" type="number" class="form-control" placeholder="Id" aria-label="Username" aria-describedby="basic-addon1">
</div>
<div class="input-group mb-3">

	<input id="txt_nome" type="text" class="form-control" placeholder="Nome" aria-label="Username" aria-describedby="basic-addon1">
</div>

<div class="input-group mb-3">
	<input id="txt_idade" type="text" class="form-control" placeholder="Idade" aria-label="Username" aria-describedby="basic-addon1">
</div>

<button id="btn_save" type="button" class="btn btn-outline-primary">Salvar</button>

<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
	<div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="toast-header">
			<img src="..." class="rounded me-2" alt="...">
			<strong class="me-auto">Bootstrap</strong>
			<small>11 mins ago</small>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body">
			Usuário salvo com sucesso!
		</div>
	</div>
</div>

@section scripts{
	<script>
		var model = @(Html.Raw(Json.Serialize(Model)));


		$(document).ready(function () {
			if (model.user !== null) {
				$("#txt_id").prop("disabled", true);
				$("#txt_id").val(model.user.id)
				$("#txt_nome").val(model.user.nome)
				$("#txt_idade").val(model.user.idade)
			}else{
				$("#txt_id").hide()
				$("#txt_nome").val("")
				$("#txt_idade").val("")
			}
		});
		$("#btn_save").click(function () {
			var user = {
				id: $("#txt_id").val() == "" ? 0 : $("#txt_id").val(), // if ternario
				nome: $("#txt_nome").val(),
				idade: $("#txt_idade").val()
			}
			$.ajax({
				type: "POST",
				url: "/User/Save",
				dataType: "json",
				contentType: "application/json",
				data: JSON.stringify(user),
				success: function (result) {

					if (result.status==true) {

						var toastLiveExample = document.getElementById('liveToast');
						var toast = new bootstrap.Toast(toastLiveExample);

						toast.show();
						
					}
				},
				error: function (result) {
					alert("Data not found");
				}
			});
		});
	</script>
}

